<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="GameField.css">
    <title>Document</title>
</head>
<body>
    <h3 id="CurrentPlayer1">CurrentPlayer: </h3>
    <button onclick="Clear()">Új játék</button> 
    <button onclick="RestartwithNewName()">Restart with new Name</button>
    <button onclick="ClearUserPoints()" id="ClearUserPoints">Clear User Points</button>
    <button onclick="Restart()" >Restart</button>
    <br>
    <div id="UserPoints">
    </div>
    

    <script>
       let User1 = localStorage.getItem("User1Name");
       let User2 = localStorage.getItem("User2Name"); 

       let User1Pointss = localStorage.getItem("User1Points");
       let User2Pointss = localStorage.getItem("User2Points");

        setInterval(function() {
            let currentPlayer = localStorage.getItem('currentPlayers');
            let playerName = currentPlayer === 'X' ? User1 : User2 ;
        document.getElementById("CurrentPlayer1").innerHTML = "CurrentPlayer: " + playerName;
        
}, 100);
        
        document.getElementById("UserPoints").innerHTML = User1 + " : " + User1Pointss + " " + User2 + " : " + User2Pointss;
        
        document.getElementById("ClearUserPoints").addEventListener("click", function(){
        let result = WhoWins(parseInt(User1Pointss), parseInt(User2Pointss));
        alert(result);
    });

       
    function Clear()
    {
        location.reload();
    }
    function RestartwithNewName()
    {
        localStorage.removeItem("User1Name");
        localStorage.removeItem("User2Name");
        window.location.href = "MainSite.html";
        localStorage.setItem("User1Points", 0);
        localStorage.setItem("User2Points", 0);
    }
    function ClearUserPoints()
    {
        localStorage.setItem("User1Points", 0);
        localStorage.setItem("User2Points", 0);
        window.location.href = "GameField.html";
    }
    function Restart()
    {
        window.location.href = "MainSite.html";
        localStorage.setItem("User1Points", 0);
        localStorage.setItem("User2Points", 0);
    }
    function WhoWins(User1p, User2p)
    {
        if(User1p > User2p)
        {
            return User1 + " Wins with " + User1p + " point(s)";
        }
        else if(User1p < User2p)
        {
            return User2 + " Wins with " + User2p + " point(s)";
        }
        else
        {
            return "Draw " + User1p + " : " + User2p;
        }
    } 
    
   

    </script>

<canvas id="myCanvas" ></canvas>







<script src="WorkGame.js"></script>
<script src="GameField.js"></script>
</body>
</html>